<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style id="temaEscuro">
        body,
        header,
        footer,
        section,
        .subsecao {
            padding: 1em;
            margin: 1em;
        }

        body {
            background-color: black;
            color: white;
        }

        header,
        footer {
            background-color: gray;
        }

        footer,
        header>h1 {
            text-align: center;
        }

        section {
            background-color: darkgray;
        }

        .subsecao {
            background-color: lightslategray;
        }
    </style>
    <link id="temaClaro" rel="stylesheet" href="dom.css">
    <title>DOM</title>
</head>

<body>

    <h1>JavaScript</h1>

    <p>Conteúdo da disciplina de Prog Web 2 para o curso técnico integrado ao ensino médio em informática para internet.
    </p>

    <h2>Introdução à linguagem JavaScript</h2>

    <p>A linguagem JavaScript foi criada em 1994 com o propósito expresso de permitir comportamento dinâmico em
        documentos apresentados por navegadores web.</p>

    <h2>Eventos em JavaScript</h2>

    <p>Os programas JavaScript que rodam nos navegadores usam um modelo de programação orientado a eventos.</p>

    <h2>Document Object Model</h2>

    <p>Cada objeto <em>Window</em> tem uma propriedade <em>document</em> para se referir ao objeto <em>Document</em>.
        Este é um objeto central par arepresentar e manipular o conteúdo do documento.</p>

    <h3>Selecionando Elementos do Documento</h3>

    <p>Os métodos <em>querySelector()</em> e <em>querySelectorAll()</em> nos permitem um elemento ou elementos em um
        documento.</p>

    <h4>Selecionando elementos com seletores CSS</h4>

    <p>Quase todos seletores CSS podem ser usados para selecionar elementos em JavaScript, mas algumas pseudoclasses não
        funcionam.</p>

    <h4>Métodos de seleção antigos</h4>

    <p>Alguns métodos de seleção mais antigos ainda funcionam, mas é aconselhável que sejam evitados. São eles:</p>

    <ul>
        <li>.getElementById("id")</li>
        <li>.getElementsByName("nome")</li>
        <li>.getElementsByTagName("h1")</li>
        <li>.getElementsByClassName("classe")</li>
    </ul>

    <h4>Elementos pré-selecionados</h4>

    <p>As propriedades <em>images</em>, <em>forms</em> e <em>links</em> fornecem um acesso fácil aos elementos
        &lt;img&gt;, &lt;form&gt; e &lt;a&gt;.</p>

    <h3>Percorrendo a estrutura do documento</h3>

    <p>A API para percorrer documentos não envolvem métodos. É um conjunto de propriedades nos objetos <em>Element</em>
        que nos permitem referenciar o pai, filhos e irmãos de um determinado elemento.</p>

    <h3>Atributos</h3>

    <p>Os métodos da classe <em>Element</em> para manipular atributos são:</p>

    <ol>
        <li>getAttribute()</li>
        <li>setAttribute()</li>
        <li>hasAttribute()</li>
        <li>removeAttribute()</li>
    </ol>

    <h3>Conteúdo do Elemento</h3>

    <p>Usa-se <em>innerHTML</em> para acessar o conteúdo de um elemento, inclusive outras tags que ele possa ter. A
        propriedade <em>textContent</em> ignora as tags dentro do elemento.</p>

    <h3>Criando inserindo e removendo Nós</h3>

    <p>O método <em>document.createElement("tag")</em> cria um novo elemento. Um elemento pode ser inserido usando os
        métodos <em>append(elemento)</em> e <em>prepend(elemento)</em>. Pode-se usar o método <em>elemento.remove()</em>
        para remover um elemento.</p>

    <h2>CSS com JavaScript</h2>

    <p>A linguagem JavaScript também permite controlar a aparência dos documentos com CSS.</p>

    <h3>Estilos comumente usados</h3>

    <p>A variedade de estilos CSS é muito grande, mas vale a pena citar os estilos mais usados:</p>

    <ul>
        <li>Atribuir o valor "none" ao estilo <em>display</em> esconde o elemento.</li>
        <li>A posição de um elemento pode ser alterada dinamicamente com o estilo <em>position</em>.</li>
        <li>Pode-se espelhar, mudar o tamanho e rotacionar elementos com o estilo <em>transform</em>.</li>
        <li>O estilo <em>transition</em> permite animar mudanças de outros estilos CSS.</li>
    </ul>

    <h3>Classes CSS</h3>

    <p>A forma mais simples de alterar o estilo de um elemento é atribuir ou remover uma classe CSS.</p>

    <style>
        .oculto {
            display: none;
        }
        .dica {
            background-color: aqua;
            margin: 0 25% 0 25%;
        }
    </style>

    <button id="mostraUmaDica">esconde</button>

    <div id="umaDica" class="dica">Esta é uma dica que aparece na página.</div>

    <script>
        document.querySelector("#mostraUmaDica").addEventListener("click", e => {
            if(e.target.textContent == 'esconde') {
                e.target.textContent = 'mostra';
                document.querySelector("#umaDica").classList.add("oculto");
            } else {
                e.target.textContent = 'esconde';
                document.querySelector("#umaDica").classList.remove("oculto");
            }
        });
    </script>

    <h3>Estilos inline</h3>

    <p>Algumas vezes não é viável fazer uma classe para cada estilo. Nessas situações, é melhor alterar o atributo
        <em>style</em> diretamente.
    </p>

    <div id="outraDica" class="dica">Outra dica. Esta pode ser movida.</div>

    <input type="text" id="topo" placeholder="topo">
    <input type="text" id="esquerda" placeholder="esquerda">
    <br>
    <button id="moveDica">Move Dica</button>

    <script>
        function movePara(elemento, x, y) {
            elemento.style.display = "block";
            elemento.style.position = "relative";
            elemento.style.left = `${x}px`;
            elemento.style.top = `${y}px`;
        }
        document.querySelector('#moveDica').addEventListener("click", () => {
            let x = document.querySelector('#esquerda').value;
            let y = document.querySelector('#topo').value;
            let dica = document.querySelector("#outraDica");
            movePara(dica, x, y);
        });
    </script>

    <p>Se uma propriedade CSS possui hífens, ela é representada sem os hífens e capitalizada em JavaScript. Por exemplo,
        a propriedade <em>border-left-width</em> fica <em>borderLeftWidth</em>.</p>

    <h3>Alterando folhas de estilo</h3>


    <p>É possível habilitar e desabilitar folhas de estilo com a propriedade <em>disabled</em>.</p>

    <script>
        function alternaTema() {
            let temaEscuro = document.querySelector("#temaEscuro");
            let temaClaro = document.querySelector("#temaClaro");
            if (temaClaro.disabled) {
                temaEscuro.disabled = true;
                temaClaro.disabled = false;
            } else {
                temaEscuro.disabled = false;
                temaClaro.disabled = true;
            }
        }
        function temaVerde() {
            let cssTemaVerde = document.createElement('link');
            cssTemaVerde.id = "temaEscuro";
            cssTemaVerde.rel = "stylesheet";
            cssTemaVerde.href = "temaVerde.css";
            temaEscuro = document.querySelector("#temaEscuro");
            temaEscuro.replaceWith(cssTemaVerde);
        }
    </script>

    <button onclick="alternaTema()">Alterna Tema</button>
    <button onclick="temaVerde()">Tema verde</button>

    <h3>Animações</h3>

    <p>Um exemplo simples de animação.</p>

    <style>
        .transparente {
            opacity: 0;
        }
        .desvanecente {
            transition: opacity .5s ease-in;
        }
    </style>

    <button id="mostraMaisUmaDica">esconde</button>

    <div id="maisUmaDica" class="dica desvanecente">Esta é MAIS uma dica que aparece na página.</div>

    <script>
        document.querySelector("#mostraMaisUmaDica").addEventListener("click", e => {
            if (e.target.textContent == 'esconde') {
                e.target.textContent = 'mostra';
                document.querySelector("#maisUmaDica").classList.add("transparente");
            } else {
                e.target.textContent = 'esconde';
                document.querySelector("#maisUmaDica").classList.remove("transparente");
            }
        });
    </script>

    <h2>Networking</h2>

    <p>A API <em>fetch()</em> permite fazer requisições HTTP.</p>
    
    <h3>Um exemplo com <em>fetch()</em></h3>

    <form action="">
        <input type="text" id="cep" placeholder="CEP" size="9">
        <input type="text" id="estado" placeholder="Estado" size="3" disabled>
        <input type="text" id="cidade" placeholder="Cidade" size="20" disabled><br>
        <input type="text" id="bairro" placeholder="Bairro" size="9" disabled>
        <input type="text" id="logradouro" placeholder="Logradouro" size="30" disabled><br>
        <input type="button" value="Enviar">
    </form>

    <script>
        document.querySelector("#cep").addEventListener("change", buscaDadosApi);
        function buscaDadosApi(evento) {
            fetch(`https://brasilapi.com.br/api/cep/v1/${evento.target.value}`)
            .then(resposta => resposta.json())
            .then(dados => {
                atribuiValor('estado', dados.state);
                atribuiValor('cidade', dados.city);
                atribuiValor('bairro', dados.neighborhood);
                atribuiValor('logradouro', dados.street);
            });
        }
        function atribuiValor(id, valor) {
            document.querySelector(`#${id}`).value = valor;
        }
    </script>

    <h2>Armazenamento</h2>

    <p>Aplicações Web podem usar APIs dos navegadores para amazenar dados localmente no computador do usuário.</p>

    <script src="dom.js"></script>
</body>

</html>