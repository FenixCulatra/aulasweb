<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>querySelectorAll</title>
</head>
<body>
    <h1>JavaScript</h1>
    <p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
    <h2>Introdução à linguagem JavaScript</h2>
    <p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
    <h2>Eventos em JavaScript</h2>
    <p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
    <h2>Document Object Model</h2>
    <p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
    <h2>CSS com JavaScript</h2>
    <p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
    <h2>Networking</h2>
    <p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
    <h2>Armazenamento</h2>
    <p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
    <script>
        const subtitulos = document.querySelectorAll('h2');
        const topicos = new Array();
        subtitulos.forEach(element => {
            // insere todos os textos em topicos
            topicos.push(element.textContent);
            // cria e insere a ancora para cada seção
            const ancora = document.createElement('a');
            ancora.setAttribute('name', element.textContent);
            element.append(ancora);
            // cria e insere o link para retornar ao início
            const retorno = document.createElement('a');
            retorno.setAttribute('href', '#');
            retorno.textContent = "início";
            element.parentElement.insertBefore(retorno, element.nextElementSibling);
        });
        const lista = document.createElement('ol');
        document.body.insertBefore(lista,document.querySelector('h1').nextElementSibling);
        topicos.forEach(topico => {
            // insere os elementos da lista 
            const item = document.createElement('li');
            lista.append(item);
            // criar e insere o link de cada seção 
            const link = document.createElement('a');
            link.setAttribute('href', `#${topico}`);
            link.textContent = topico;
            item.append(link);
        });
    </script>
</body>
</html>